<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<title>Panel â€“ Ver TransmisiÃ³n</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<style>
  body {
    font-family: Arial, sans-serif;
    padding: 20px;
    text-align: center;
  }
  video {
    width: 95%;
    max-width: 700px;
    border-radius: 14px;
    background: black;
  }
</style>
</head>

<body>
<h2>ğŸ¥ TransmisiÃ³n desde el Sereno</h2>
<video id="remoteVideo" autoplay playsinline></video>

<script>
const hash = window.location.hash.substring(1);
if (!hash) {
  alert("No se encontrÃ³ oferta de conexiÃ³n.");
}

let pc = new RTCPeerConnection();

pc.ontrack = (e) => {
  document.getElementById("remoteVideo").srcObject = e.streams[0];
};

(async () => {
  const offer = JSON.parse(atob(hash));
  await pc.setRemoteDescription(offer);
  const answer = await pc.createAnswer();
  await pc.setLocalDescription(answer);

  pc.onicecandidate = e => {
    if (!e.candidate) {
      console.log("ConexiÃ³n establecida.");
    }
  };
})();
</script>

</body>
</html>
